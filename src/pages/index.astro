---
import { getCollection } from "astro:content";
import BlogPost from "../components/BlogPost.astro";
import type { BlogPost as BlogPostType } from "../types/blog";
import BlogLayout from "../layouts/BlogLayout.astro";

const rawPosts = await getCollection("posts");
const posts: BlogPostType[] = rawPosts.map((post) => ({
	title: post.data.title,
	date: post.data.date,
	description: post.data.description,
	slug: post.slug,
	tags: post.data.tags,
	content: post.body,
}));
---

<BlogLayout>
	{
		posts.map((post) => (
			<BlogPost
				title={post.title}
				date={post.date}
				description={post.description}
				slug={post.slug}
				tags={post.tags}
			/>
		))
	}
</BlogLayout>
